<!--<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
    <p th:text="'Hello, ' + ${name} + '!'" />
</body>
</html>-->

<!DOCTYPE HTML>

<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $("#yes").submit(function(event) {
                event.preventDefault();
                ajaxPost();
            });

            $("#get").submit(function(event) {
                event.preventDefault();
                ajaxGet();
            });

            function ajaxPost() {
                var login = {
                    email: $('#username').val(),
                    password: $('#password').val()
                }
                $.ajax({
                    type: "POST",
                    contentType: "application/json",
                    url: "api/user/get",
                    data: JSON.stringify(login),
                    dataType: 'json',
                    success: function(result) {
                        $('#username').val("");
                        $('#password').val("");
                        if(result == true) {
                            $("#results").html("");
                            window.location.href = "mainpage";
                        }
                        else {
                            $("#results").html("");
                            $("#results").html("Incorrect email/password");
                        }
                    },
                    error: function(msg) {
                        console.log(msg.responseText);
                    }
                });
            }

            function ajaxGet() {
                $.ajax({
                    type: "GET",
                    contentType: "application/json",
                    url: "api/user/fetch",
                    success: function(result) {
                        console.log(result);
                    },
                    error: function(msg) {
                        console.log(msg.responseText);
                    }
                });
            }
        });
    </script>

</head>

<body style="background-color: #f8f8ff;">
    <div id="messages">
        <h1>
            Login Page
        </h1>
        <img src='../grouped.png' alt='grouped logo' width='50' height='50'></br>
        <input type='text' id='username' name='username' /></br>
        <input type='text' id='password' name='password' /></br>
        <form id="yes" action="">
            <button>Sign in</button>
        </form>
        <form id = "no" action="/signup">
            <button>Sign Up</button>
        </form>
        <form id = "get" action="">
            <br>
            <button>Fetch</button>
        </form>
    </div>
    <div id="results"></div>
</body>
</html>